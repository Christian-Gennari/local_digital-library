/* index.css */
@import url("https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Lora:ital,wght@0,400..700;1,400..700&display=swap");

@import "tailwindcss";

@theme {
  /* Font families */
  --font-sans: "Inter", ui-sans-serif, system-ui, sans-serif;
  --font-serif: "Lora", Georgia, "Times New Roman", Times, serif;

  /* Colors */
  --color-primary: oklch(0.84 0.18 117.33);

  /* Add animation durations and timing functions for ProgressBar.tsx */
  --animate-shimmer: shimmer 2s linear infinite;
  --animate-spin-slow: spin 3s linear infinite;
}

/* Define keyframes after @theme */
@keyframes shimmer {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(100%);
  }
}

/* Optional: Slower spin for reset button */
@keyframes spin-slow {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Utility classes for animations */
@layer utilities {
  .animate-shimmer {
    animation: var(--animate-shimmer);
  }

  .animate-spin-slow {
    animation: var(--animate-spin-slow);
  }
}

/* Optional: If you want to add custom progress bar colors */
@layer components {
  .progress-not-started {
    @apply bg-gray-400;
  }

  .progress-in-progress {
    @apply bg-emerald-500;
  }

  .progress-finished {
    @apply bg-emerald-600;
  }

  /* Progress bar shimmer overlay specific styles */
  .progress-shimmer {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
  }
}

[data-theme-preview="paper"] {
  background-color: #fafaf8;
  color: #1f1f1f;
}

[data-theme-preview="sepia"] {
  background-color: #f4f1ea;
  color: #2c2416;
}

[data-theme-preview="night"] {
  background-color: #1e1e1e;
  color: #e8e6e3;
}

[data-theme-preview="highContrast"] {
  background-color: #ffffff;
  color: #000000;
}

/* Theme CSS Variables */
:root {
  /* Default Paper Theme */
  --theme-bg-primary: #fafaf8;
  --theme-bg-secondary: #f5f5f3;
  --theme-bg-tertiary: #efefe8;
  --theme-text-primary: #1f1f1f;
  --theme-text-secondary: #4a4a48;
  --theme-text-muted: #6b6b68;
  --theme-border: rgba(0, 0, 0, 0.08);
  --theme-border-hover: rgba(0, 0, 0, 0.12);
  --theme-hover: rgba(0, 0, 0, 0.04);
  --theme-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  --theme-reader-bg: #fafaf8;
  --theme-reader-text: #1f1f1f;
  --theme-reader-selection: rgba(59, 130, 246, 0.15);
  --theme-reader-highlight: rgba(251, 191, 36, 0.25);
  --theme-accent: #3b82f6;
  --theme-success: #10b981;
  --theme-warning: #f59e0b;
  --theme-error: #ef4444;
  --theme-button-primary: #1e293b;
  --theme-button-primary-hover: #334155;
  --theme-button-danger: #dc2626;
  --theme-button-danger-hover: #b91c1c;
}

/* Add paper theme with data-theme for consistency */
[data-theme="paper"] {
  --theme-bg-primary: #fafaf8;
  --theme-bg-secondary: #f5f5f3;
  --theme-bg-tertiary: #efefe8;
  --theme-text-primary: #1f1f1f;
  --theme-text-secondary: #4a4a48;
  --theme-text-muted: #6b6b68;
  --theme-border: rgba(0, 0, 0, 0.08);
  --theme-border-hover: rgba(0, 0, 0, 0.12);
  --theme-hover: rgba(0, 0, 0, 0.04);
  --theme-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  --theme-reader-bg: #fafaf8;
  --theme-reader-text: #1f1f1f;
  --theme-reader-selection: rgba(59, 130, 246, 0.15);
  --theme-reader-highlight: rgba(251, 191, 36, 0.25);
  --theme-accent: #3b82f6;
  --theme-success: #10b981;
  --theme-warning: #f59e0b;
  --theme-error: #ef4444;
  --theme-button-primary: #1e293b;
  --theme-button-primary-hover: #334155;
  --theme-button-danger: #dc2626;
  --theme-button-danger-hover: #b91c1c;
}

/* Theme-specific overrides */
[data-theme="sepia"] {
  --theme-bg-primary: #f4f1ea;
  --theme-bg-secondary: #ebe6dc;
  --theme-bg-tertiary: #e2dcd0;
  --theme-text-primary: #2c2416;
  --theme-text-secondary: #5c5142;
  --theme-text-muted: #7a6e5f;
  --theme-border: rgba(92, 81, 66, 0.15);
  --theme-border-hover: rgba(92, 81, 66, 0.25);
  --theme-hover: rgba(92, 81, 66, 0.08);
  --theme-shadow: 0 1px 3px rgba(92, 81, 66, 0.1);
  --theme-reader-bg: #f4f1ea;
  --theme-reader-text: #2c2416;
  --theme-reader-selection: rgba(218, 165, 32, 0.2);
  --theme-reader-highlight: rgba(218, 165, 32, 0.25);
  --theme-accent: #8b7355;
  --theme-success: #7c8471;
  --theme-warning: #d4a574;
  --theme-error: #b87f77;
  --theme-button-primary: #5c5142;
  --theme-button-primary-hover: #3d362b;
  --theme-button-danger: #b87f77;
  --theme-button-danger-hover: #9d6860;
}

[data-theme="night"] {
  --theme-bg-primary: #1e1e1e;
  --theme-bg-secondary: #252525;
  --theme-bg-tertiary: #2a2a2a;
  --theme-text-primary: #e8e6e3;
  --theme-text-secondary: #a8a6a3;
  --theme-text-muted: #787673;
  --theme-border: rgba(255, 255, 255, 0.1);
  --theme-border-hover: rgba(255, 255, 255, 0.15);
  --theme-hover: rgba(255, 255, 255, 0.05);
  --theme-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  --theme-reader-bg: #1e1e1e;
  --theme-reader-text: #e8e6e3;
  --theme-reader-selection: rgba(90, 159, 212, 0.3);
  --theme-reader-highlight: rgba(255, 235, 59, 0.25);
  --theme-accent: #5a9fd4;
  --theme-success: #4ade80;
  --theme-warning: #fcd34d;
  --theme-error: #f87171;
  --theme-button-primary: #5a9fd4;
  --theme-button-primary-hover: #4788c2;
  --theme-button-danger: #f87171;
  --theme-button-danger-hover: #ef4444;
}

[data-theme="highContrast"] {
  --theme-bg-primary: #ffffff;
  --theme-bg-secondary: #f8f8f8;
  --theme-bg-tertiary: #f0f0f0;
  --theme-text-primary: #000000;
  --theme-text-secondary: #2c2c2c;
  --theme-text-muted: #4a4a4a;
  --theme-border: rgba(0, 0, 0, 0.2);
  --theme-border-hover: rgba(0, 0, 0, 0.3);
  --theme-hover: rgba(0, 0, 0, 0.08);
  --theme-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  --theme-reader-bg: #ffffff;
  --theme-reader-text: #000000;
  --theme-reader-selection: rgba(0, 102, 204, 0.3);
  --theme-reader-highlight: rgba(255, 235, 59, 0.4);
  --theme-accent: #0066cc;
  --theme-success: #008844;
  --theme-warning: #cc6600;
  --theme-error: #cc0000;
  --theme-button-primary: #000000;
  --theme-button-primary-hover: #333333;
  --theme-button-danger: #cc0000;
  --theme-button-danger-hover: #990000;
}

/* Core Theme Utility Classes */
.theme-bg-primary {
  background-color: var(--theme-bg-primary);
  transition: var(--theme-transition);
}

.theme-bg-secondary {
  background-color: var(--theme-bg-secondary);
  transition: var(--theme-transition);
}

.theme-bg-tertiary {
  background-color: var(--theme-bg-tertiary);
  transition: var(--theme-transition);
}

.theme-text-primary {
  color: var(--theme-text-primary);
  transition: var(--theme-transition);
}

.theme-text-secondary {
  color: var(--theme-text-secondary);
  transition: var(--theme-transition);
}

.theme-text-muted {
  color: var(--theme-text-muted);
  transition: var(--theme-transition);
}

.theme-border {
  border-color: var(--theme-border);
  transition: var(--theme-transition);
}

/* HOVER UTILITIES - Only on devices with precise pointers (mice/trackpads) */
@media (hover: hover) and (pointer: fine) {
  .hover\:theme-bg-primary:hover {
    background-color: var(--theme-bg-primary);
  }

  .hover\:theme-bg-secondary:hover {
    background-color: var(--theme-bg-secondary);
  }

  .hover\:theme-bg-tertiary:hover {
    background-color: var(--theme-bg-tertiary);
  }

  .hover\:theme-text-primary:hover {
    color: var(--theme-text-primary);
  }

  .hover\:theme-text-secondary:hover {
    color: var(--theme-text-secondary);
  }

  .hover\:theme-border-hover:hover {
    border-color: var(--theme-border-hover);
  }

  .theme-btn-primary:hover {
    background-color: var(--theme-button-primary-hover);
  }

  .theme-btn-danger:hover {
    background-color: var(--theme-button-danger-hover);
  }

  .theme-btn-secondary:hover {
    background-color: var(--theme-hover);
  }

  .group:hover .group-hover\:theme-text-primary {
    color: var(--theme-text-primary);
  }

  .group:hover .group-hover\:theme-text-muted {
    color: var(--theme-text-muted);
  }

  .group:hover .group-hover\:theme-bg-secondary {
    background-color: var(--theme-bg-secondary);
  }
}

/* Active state utilities */
.active\:theme-bg-tertiary:active {
  background-color: var(--theme-bg-tertiary);
}

/* Theme-aware buttons - BASE STYLES ONLY */
.theme-btn-primary {
  background-color: var(--theme-button-primary);
  color: white;
  transition: var(--theme-transition);
}

.theme-btn-danger {
  background-color: var(--theme-button-danger);
  color: white;
  transition: var(--theme-transition);
}

.theme-btn-secondary {
  background-color: var(--theme-bg-tertiary);
  color: var(--theme-text-primary);
  transition: var(--theme-transition);
}

/* View toggle selected state */
.view-toggle-active {
  background-color: var(--theme-button-primary);
  color: white;
}

.placeholder\:theme-text-muted::placeholder {
  color: var(--theme-text-muted);
}

/* Apply transitions to all theme elements */
[class*="theme-"] {
  transition: var(--theme-transition);
}

/* React-PDF styles */
.react-pdf__Page__textContent {
  user-select: text;
}

.react-pdf__Page__annotations {
  user-select: none;
}

/* Remove PDF page borders and shadows */
.react-pdf__Page__canvas {
  box-shadow: none !important;
  border: none !important;
}

.react-pdf__Page {
  box-shadow: none !important;
  border: none !important;
}

@utility hide-scrollbar {
  @apply [scrollbar-width:none] [&::-webkit-scrollbar]:hidden;
}

/* TTS Player Styles - Theme-aware */
.tts-player {
  transition: all 0.3s ease;
  backdrop-filter: blur(10px);
  background: var(--theme-bg-primary);
}

/* Keep all animation keyframes as they are */
@keyframes tts-highlightPulse {
  0% {
    background: linear-gradient(
      135deg,
      rgba(147, 197, 253, 0.2),
      rgba(96, 165, 250, 0.2)
    );
  }
  50% {
    background: linear-gradient(
      135deg,
      rgba(147, 197, 253, 0.5),
      rgba(96, 165, 250, 0.5)
    );
  }
  100% {
    background: linear-gradient(
      135deg,
      rgba(147, 197, 253, 0.4),
      rgba(96, 165, 250, 0.4)
    );
  }
}

/* Base search highlight (shared by EPUB and PDF) */
.search-highlight {
  background-color: rgba(255, 237, 0, 0.4);
  pointer-events: none;
  mix-blend-mode: multiply;
  z-index: 1;
  transition: background-color 0.2s ease;
  position: absolute;
}

/* Ensure PDF page is positioned for absolute children */
.react-pdf__Page {
  position: relative !important;
}

/* Ensure text layer doesn't interfere with positioning */
.react-pdf__Page__textContent {
  position: absolute !important;
  left: 0 !important;
  top: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
}

/* Add the missing pulse-highlight animation */
@keyframes pulse-highlight {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

/* Mobile-specific adjustments */
@media (max-width: 768px) {
  .tts-player {
    width: 100% !important;
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    border-radius: 16px 16px 0 0 !important;
  }
}

/* Print styles */
@media print {
  .tts-player,
  .tts-highlight {
    display: none !important;
  }
}
